# 📋 우선순위 로드맵 - 반복 일정 기능

## 📋 기본 정보

- **작성일**: 2025-10-28
- **프로젝트명**: 캘린더 애플리케이션 - 반복 일정 기능
- **버전**: v1.0
- **작성자**: BMAD PM

---

## 🎯 릴리스 계획

### 🚀 Release 1.0 (MVP - 핵심 기능)

- **목표**: 반복 일정의 생성, 표시, 수정, 삭제 핵심 기능 제공
- **완료 기준**: 과제 요구사항의 모든 체크리스트 항목 통과
- **핵심 기능**:
  - [x] Phase 1: 반복 일정 생성 (매일/매주/매월/매년, 특수 케이스 처리)
  - [x] Phase 2: 캘린더 뷰 표시 (아이콘, 반복 주기 표시)
  - [x] Phase 3: 반복 일정 수정 (단일/전체 선택)
  - [x] Phase 4: 반복 일정 삭제 (단일/전체 선택)
  - [x] Phase 5: 테스트 및 QA (90% 커버리지, 모든 AC 검증)

---

### 🔧 Release 1.1 (개선 - 선택적)

- **목표**: 사용자 경험 개선 및 추가 기능
- **완료 조건**: MVP 완료 후 시간 여유가 있을 경우
- **추가 기능**:
  - [ ] 반복 패턴 프리셋 (주중 5일, 주말 2일 등)
  - [ ] 반복 횟수 제한 (N회 반복 후 종료)
  - [ ] 반복 예외 날짜 관리 UI
  - [ ] 반복 일정 통계 및 요약

---

## 📊 우선순위 매트릭스

### 🔢 우선순위 기준

- **비즈니스 가치**: 과제 요구사항 충족 여부
- **기술적 복잡도**: 구현 난이도 및 리스크
- **의존성**: 다른 기능에 대한 의존도

| 기능                               | 비즈니스 가치 | 기술적 복잡도 | 우선순위 | 릴리스 | Phase |
| ---------------------------------- | ------------- | ------------- | -------- | ------ | ----- |
| 반복 유형 선택 UI                  | High          | Low           | 1        | 1.0    | 1     |
| 반복 날짜 생성 로직 (기본)         | High          | Medium        | 2        | 1.0    | 1     |
| 특수 케이스 처리 (31일, 윤년 29일) | High          | High          | 3        | 1.0    | 1     |
| 반복 일정 확장 함수                | High          | Medium        | 4        | 1.0    | 2     |
| 캘린더 뷰 아이콘 표시              | High          | Low           | 5        | 1.0    | 2     |
| 일정 목록 반복 정보 표시           | Medium        | Low           | 6        | 1.0    | 2     |
| 반복 일정 수정 다이얼로그          | High          | Medium        | 7        | 1.0    | 3     |
| 단일 수정 로직                     | High          | Medium        | 8        | 1.0    | 3     |
| 전체 수정 로직                     | High          | Low           | 9        | 1.0    | 3     |
| 반복 일정 삭제 다이얼로그          | High          | Low           | 10       | 1.0    | 4     |
| 단일 삭제 로직                     | High          | Medium        | 11       | 1.0    | 4     |
| 전체 삭제 로직                     | High          | Low           | 12       | 1.0    | 4     |
| 유닛 테스트 (utils)                | High          | Medium        | 13       | 1.0    | 5     |
| 통합 테스트 (hooks)                | High          | Medium        | 14       | 1.0    | 5     |
| E2E 테스트 (전체 플로우)           | High          | High          | 15       | 1.0    | 5     |

---

## 📋 Phase별 상세 계획

### Phase 1: 반복 일정 생성 📅

#### 목표

사용자가 반복 일정을 생성하고 특수 케이스를 올바르게 처리

#### 구현 범위

1. **UI 활성화**

   - App.tsx의 주석 처리된 반복 UI 활성화
   - 반복 유형 셀렉트박스 (매일/매주/매월/매년)
   - 반복 간격 입력 필드
   - 반복 종료일 입력 필드

2. **유틸리티 함수 구현**

   - `generateRecurringDates()`: 반복 날짜 생성
   - `isValidRecurringDate()`: 특수 날짜 유효성 검증
   - `calculateNextRecurringDate()`: 다음 반복 날짜 계산

3. **특수 케이스 처리**
   - 31일 선택 시 31일이 있는 달에만 생성
   - 윤년 2월 29일 선택 시 윤년에만 생성

#### 완료 기준

- [x] 반복 UI가 표시되고 입력 가능
- [x] 모든 반복 유형이 올바르게 동작
- [x] 특수 케이스 테스트 통과
- [x] dateUtils.ts 유닛 테스트 작성

---

### Phase 2: 캘린더 뷰 표시 📆

#### 목표

반복 일정을 캘린더 뷰와 일정 목록에 올바르게 표시

#### 구현 범위

1. **반복 일정 확장**

   - `expandRecurringEvents()`: 반복 일정을 개별 이벤트로 확장
   - 현재 뷰 범위(월별/주별)만 확장

2. **아이콘 표시**

   - MUI `Repeat` 아이콘 추가
   - 반복 일정에만 아이콘 표시
   - 단일 일정은 아이콘 없음

3. **일정 목록 정보 표시**
   - "반복: N일/주/월/년마다" 텍스트
   - 종료일이 있는 경우 "(종료: YYYY-MM-DD)" 표시

#### 완료 기준

- [x] 반복 일정이 캘린더 뷰에 올바르게 표시
- [x] 반복 아이콘이 올바르게 표시
- [x] 일정 목록에 반복 정보 표시
- [x] eventUtils.ts 유닛 테스트 작성
- [x] useCalendarView.ts 통합 테스트 작성

---

### Phase 3: 반복 일정 수정 ✏️

#### 목표

반복 일정 수정 시 단일/전체 선택 옵션 제공

#### 구현 범위

1. **수정 확인 다이얼로그**

   - "해당 일정만 수정하시겠어요?" 다이얼로그
   - "예" / "아니오" 버튼

2. **단일 수정 로직**

   - 해당 날짜의 일정만 수정
   - repeat.type을 'none'으로 변경
   - 반복 아이콘 제거

3. **전체 수정 로직**
   - 모든 반복 일정 수정
   - repeat 속성 유지
   - 반복 아이콘 유지

#### 완료 기준

- [x] 반복 일정 수정 시 다이얼로그 표시
- [x] 단일 수정이 올바르게 동작
- [x] 전체 수정이 올바르게 동작
- [x] useEventOperations.ts 통합 테스트 작성

---

### Phase 4: 반복 일정 삭제 🗑️

#### 목표

반복 일정 삭제 시 단일/전체 선택 옵션 제공

#### 구현 범위

1. **삭제 확인 다이얼로그**

   - "해당 일정만 삭제하시겠어요?" 다이얼로그
   - "예" / "아니오" 버튼

2. **단일 삭제 로직**

   - 해당 날짜의 일정만 삭제
   - 다른 반복 일정 유지

3. **전체 삭제 로직**
   - 모든 반복 일정 삭제
   - 캘린더 뷰와 일정 목록에서 모두 제거

#### 완료 기준

- [x] 반복 일정 삭제 시 다이얼로그 표시
- [x] 단일 삭제가 올바르게 동작
- [x] 전체 삭제가 올바르게 동작
- [x] useEventOperations.ts 통합 테스트 작성

---

### Phase 5: 테스트 및 QA 🧪

#### 목표

모든 기능이 올바르게 동작하고 과제 요구사항을 충족

#### 구현 범위

1. **유닛 테스트**

   - dateUtils.ts 테스트
   - eventUtils.ts 테스트
   - 특수 케이스 경계값 테스트

2. **통합 테스트**

   - useEventOperations.ts 테스트
   - useCalendarView.ts 테스트
   - useSearch.ts 테스트

3. **E2E 테스트**

   - 반복 일정 생성 플로우
   - 반복 일정 수정 플로우 (단일/전체)
   - 반복 일정 삭제 플로우 (단일/전체)

4. **QA 검증**
   - 과제 요구사항 체크리스트 검증
   - 수용 기준(AC) 검증
   - 성공 지표 달성 확인

#### 완료 기준

- [x] 테스트 커버리지 90% 이상
- [x] 모든 테스트 통과
- [x] 과제 요구사항 100% 충족
- [x] QA 검증 완료

---

## 🎯 성공 지표 (Success Metrics)

### 📊 측정 가능한 지표

#### 1️⃣ 기능 완성도

- **지표**: 과제 요구사항 체크리스트 완료율
- **목표**: 100% (모든 항목 통과)
- **측정 방법**: PR 템플릿 체크리스트 검증

#### 2️⃣ 테스트 품질

- **지표**: 테스트 커버리지
- **목표**: 라인 커버리지 90% 이상
- **측정 방법**: `pnpm run test:coverage` 실행

#### 3️⃣ 타입 안정성

- **지표**: TypeScript 컴파일 에러
- **목표**: 0개 (any 타입 사용 금지)
- **측정 방법**: `pnpm lint:tsc` 실행

#### 4️⃣ 코드 품질

- **지표**: ESLint 에러
- **목표**: 0개
- **측정 방법**: `pnpm lint:eslint` 실행

#### 5️⃣ 특수 케이스 처리

- **지표**: 31일, 윤년 29일 테스트 통과율
- **목표**: 100%
- **측정 방법**: 특수 케이스 전용 테스트 실행

---

## ⚠️ 리스크 관리

### 🚨 의존성 리스크

#### 리스크: 데이터 모델 설계 지연

- **영향도**: 높음
- **발생 확률**: 중간
- **영향 범위**: Phase 3, 4 (수정/삭제 로직)
- **대응 방안**:
  - Architect 에이전트와 조기 협의
  - Option 1 (parentEventId) 우선 구현
  - 필요 시 Option 2 (exceptions)로 변경 가능하도록 추상화

#### 리스크: API 변경 필요성

- **영향도**: 중간
- **발생 확률**: 낮음
- **영향 범위**: server.js, useEventOperations.ts
- **대응 방안**:
  - 클라이언트 측 확장 로직 우선 구현
  - 서버 API는 최소 변경으로 대응

---

### ⏱️ 일정 리스크

#### 리스크: 특수 케이스 구현 시간 초과

- **영향도**: 높음
- **발생 확률**: 중간
- **영향 범위**: Phase 1
- **대응 방안**:
  - 특수 케이스를 별도 함수로 분리
  - TDD 방식으로 테스트 먼저 작성하여 요구사항 명확화
  - 페어 프로그래밍 또는 코드 리뷰 적극 활용

#### 리스크: 테스트 작성 시간 부족

- **영향도**: 중간
- **발생 확률**: 중간
- **영향 범위**: Phase 5
- **대응 방안**:
  - 각 Phase 완료 시 즉시 테스트 작성
  - 테스트 템플릿 및 헬퍼 함수 활용
  - 중요도 높은 테스트 우선 작성

---

### 🐛 품질 리스크

#### 리스크: 특수 케이스 버그

- **영향도**: 높음
- **발생 확률**: 중간
- **영향 범위**: 31일, 윤년 29일 처리
- **대응 방안**:
  - 경계값 테스트 철저히 작성
  - 윤년 판별 로직 검증 (4년 배수 && (100년 배수 아님 || 400년 배수))
  - QA 단계에서 수동 테스트 병행

#### 리스크: 반복 일정 확장 로직 버그

- **영향도**: 중간
- **발생 확률**: 낮음
- **영향 범위**: Phase 2 (캘린더 뷰 표시)
- **대응 방안**:
  - 유닛 테스트로 다양한 시나리오 검증
  - 실제 데이터로 통합 테스트 수행
  - 메모이제이션 활용하여 성능 및 안정성 확보

---

## 🔄 다음 단계

### 📌 Architect 에이전트

- [x] 데이터 모델 설계 (parentEventId vs exceptions 결정)
- [x] 반복 일정 확장 로직 아키텍처 설계
- [x] API 인터페이스 정의
- [x] 컴포넌트 구조 및 데이터 플로우 설계

### 📌 Scrum Master 에이전트

- [x] Phase별 Story 파일 생성
- [x] 각 Story의 수용 기준 및 구현 지시사항 작성
- [x] 테스트 힌트 및 완료 조건 정의
- [x] 개발 사이클 시작

---

## ✅ PM 체크리스트

- [x] 모든 기능이 우선순위별로 분류됨 (우선순위 매트릭스)
- [x] 릴리스 계획이 현실적임 (Phase 1~5 단계별 구현)
- [x] 성공 지표가 측정 가능함 (5가지 측정 가능한 지표)
- [x] 리스크가 식별되고 대응 방안이 있음 (의존성/일정/품질 리스크)
- [x] 다음 에이전트가 작업할 수 있는 충분한 정보 제공 (Phase별 상세 계획)

---

## 📈 점수 현황 (Score Status)

- **획득 점수 (Acquired Score):** 5점 (체크리스트 5개 항목 완료)
- **누적 점수 (Cumulative Score):** 25점 (이전 20점 + 현재 5점)
- **총점 (Total Score):** 예상 총점 100점

---

**작성자**: BMAD PM  
**다음 핸드오프**: Architect 및 Scrum Master 에이전트  
**참조 문서**:

- `mockdowns/artifacts/orchestrator/2025-10-28_PRD_summary_v1.0.md`
- `mockdowns/artifacts/orchestrator/2025-10-28_Architecture_summary_v1.0.md`
- `mockdowns/artifacts/analyst/2025-10-28_반복일정기능_PRD_v1.0.md`
- `mockdowns/artifacts/2025-10-28_project_structure_v1.0.md`
