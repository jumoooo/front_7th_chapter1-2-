# PRD: 반복 일정 표시, 수정, 삭제 기능

## 📋 기본 정보

- **작성일**: 2025-10-30
- **프로젝트명**: 일정 관리 앱 - 반복 일정 표시/수정/삭제
- **Story ID**: STORY-002
- **버전**: v2.0
- **작성자**: BMAD Analyst
- **이전 Story**: STORY-001 (반복 날짜 계산 로직)
- **이전 누적 점수**: 26점

## 🎯 문제 정의

STORY-001에서 반복 일정의 날짜 계산 로직을 구현했으나, 실제 캘린더에 반복 일정을 표시하고 수정/삭제하는 기능이 없어 사용자가 반복 일정을 관리할 수 없습니다.

### 현재 상태
- ✅ 반복 날짜 계산 로직 구현 완료
- ✅ 반복 유형 선택 UI 구현 완료
- ❌ 캘린더에 반복 일정 표시 기능 없음
- ❌ 반복 일정 수정 시 단일/전체 선택 기능 없음
- ❌ 반복 일정 삭제 시 단일/전체 선택 기능 없음

## 👥 사용자 스토리

### Epic 1: 반복 일정 표시

- **As a** 일정 관리 앱 사용자
- **I want** 캘린더에서 반복 일정을 시각적으로 구분하여 보고 싶다
- **So that** 어떤 일정이 반복 일정인지 쉽게 파악할 수 있다

#### User Story 1.1: 반복 일정 아이콘 표시

- **Given** 사용자가 반복 일정을 생성했을 때
- **When** 캘린더 뷰를 확인하면
- **Then** 반복 일정에는 반복 아이콘(🔁)이 표시된다

#### User Story 1.2: 반복 일정 인스턴스 표시

- **Given** 매일 반복 일정(1/1~1/5)을 생성했을 때
- **When** 1월 캘린더를 보면
- **Then** 1일, 2일, 3일, 4일, 5일에 각각 일정이 표시된다

#### User Story 1.3: 단일 수정된 반복 일정 아이콘 제거

- **Given** 반복 일정 중 하나를 단일 수정했을 때
- **When** 캘린더 뷰를 확인하면
- **Then** 수정된 일정의 반복 아이콘이 사라진다
- **And** 나머지 반복 일정의 아이콘은 유지된다

### Epic 2: 반복 일정 수정

- **As a** 일정 관리 앱 사용자
- **I want** 반복 일정을 수정할 때 단일 또는 전체를 선택하고 싶다
- **So that** 필요에 따라 특정 일정만 수정하거나 전체를 일괄 수정할 수 있다

#### User Story 2.1: 단일 수정 (해당 일정만 수정)

- **Given** 사용자가 반복 일정 중 하나를 수정하려고 할 때
- **When** "해당 일정만 수정하시겠어요?" 다이얼로그에서 "예"를 선택하면
- **Then** 해당 일정만 수정된다
- **And** `repeat.type`이 `'none'`으로 변경된다
- **And** 반복 아이콘이 사라진다
- **And** 다른 반복 일정은 영향받지 않는다

#### User Story 2.2: 전체 수정 (모든 반복 일정 수정)

- **Given** 사용자가 반복 일정 중 하나를 수정하려고 할 때
- **When** "해당 일정만 수정하시겠어요?" 다이얼로그에서 "아니오"를 선택하면
- **Then** 동일한 `repeatGroupId`를 가진 모든 일정이 수정된다
- **And** 반복 설정이 유지된다
- **And** 반복 아이콘이 유지된다

### Epic 3: 반복 일정 삭제

- **As a** 일정 관리 앱 사용자
- **I want** 반복 일정을 삭제할 때 단일 또는 전체를 선택하고 싶다
- **So that** 필요에 따라 특정 일정만 삭제하거나 전체를 일괄 삭제할 수 있다

#### User Story 3.1: 단일 삭제 (해당 일정만 삭제)

- **Given** 사용자가 반복 일정 중 하나를 삭제하려고 할 때
- **When** "해당 일정만 삭제하시겠어요?" 다이얼로그에서 "예"를 선택하면
- **Then** 해당 일정만 삭제된다
- **And** 다른 반복 일정은 유지된다

#### User Story 3.2: 전체 삭제 (모든 반복 일정 삭제)

- **Given** 사용자가 반복 일정 중 하나를 삭제하려고 할 때
- **When** "해당 일정만 삭제하시겠어요?" 다이얼로그에서 "아니오"를 선택하면
- **Then** 동일한 `repeatGroupId`를 가진 모든 일정이 삭제된다

## 📋 수용 기준 (Acceptance Criteria)

### AC 1: 반복 일정 아이콘 표시

- ✅ 반복 일정(`repeatGroupId`가 존재하는 일정)에는 반복 아이콘(🔁)이 표시된다
- ✅ 단일 일정으로 전환된 일정(`repeat.type === 'none'`)은 반복 아이콘이 표시되지 않는다
- ✅ 캘린더 뷰(주별, 월별)에서 반복 아이콘이 일정 제목과 함께 표시된다

### AC 2: 반복 일정 수정 다이얼로그

- ✅ 반복 일정 수정 시 "해당 일정만 수정하시겠어요?" 다이얼로그가 표시된다
- ✅ 다이얼로그에는 "예"와 "아니오" 버튼이 존재한다
- ✅ 다이얼로그는 일정 수정 폼이 열리기 전에 표시된다
- ✅ 단일 일정 수정 시에는 다이얼로그가 표시되지 않는다

### AC 3: 단일 수정 기능

- ✅ "예" 선택 시 해당 일정만 수정된다
- ✅ 수정된 일정의 `repeat.type`이 `'none'`으로 변경된다
- ✅ 수정된 일정의 `repeatGroupId`는 유지되지만 `isRepeatInstance`는 `false`로 변경된다
- ✅ 수정된 일정의 반복 아이콘이 사라진다
- ✅ 다른 반복 일정은 영향받지 않는다

### AC 4: 전체 수정 기능

- ✅ "아니오" 선택 시 동일한 `repeatGroupId`를 가진 모든 일정이 수정된다
- ✅ 모든 반복 일정의 제목, 설명, 위치, 카테고리, 시간이 일괄 수정된다
- ✅ 반복 설정(`repeat.type`, `repeat.interval`, `repeat.endDate`)은 유지된다
- ✅ 반복 아이콘이 유지된다

### AC 5: 반복 일정 삭제 다이얼로그

- ✅ 반복 일정 삭제 시 "해당 일정만 삭제하시겠어요?" 다이얼로그가 표시된다
- ✅ 다이얼로그에는 "예"와 "아니오" 버튼이 존재한다
- ✅ 다이얼로그는 삭제가 실행되기 전에 표시된다
- ✅ 단일 일정 삭제 시에는 다이얼로그가 표시되지 않는다

### AC 6: 단일 삭제 기능

- ✅ "예" 선택 시 해당 일정만 삭제된다
- ✅ 다른 반복 일정은 유지된다

### AC 7: 전체 삭제 기능

- ✅ "아니오" 선택 시 동일한 `repeatGroupId`를 가진 모든 일정이 삭제된다
- ✅ 해당 반복 그룹의 모든 인스턴스가 삭제된다

## 🚫 비기능 요구사항

### 성능
- 반복 일정 아이콘 렌더링은 성능 저하 없이 표시되어야 함
- 전체 수정/삭제 시 모든 인스턴스가 1초 이내에 처리되어야 함

### 사용성
- 다이얼로그는 사용자가 쉽게 이해할 수 있는 명확한 문구 사용
- 단일/전체 선택 후 작업은 취소할 수 없으므로 신중하게 선택하도록 안내

### 접근성
- 다이얼로그는 키보드로 조작 가능해야 함
- 반복 아이콘은 스크린 리더로 읽을 수 있어야 함

## 🎯 성공 지표

- 반복 일정 아이콘이 모든 캘린더 뷰에서 정확히 표시됨
- 단일/전체 수정 시 의도한 대로 동작함
- 단일/전체 삭제 시 의도한 대로 동작함
- 사용자가 반복 일정 관리를 쉽게 수행할 수 있음

## 🔗 관련 문서

- **이전 Story**: STORY-001 (반복 날짜 계산 로직)
- **Feature Request**: `mockdowns/feature_request.md` (항목 2, 4, 5)
- **Architecture**: `mockdowns/artifacts/architect/2025-10-30_반복일정_아키텍처설계_v1.0.md`

## ⚠️ 제약사항 및 가정

### 제약사항
- STORY-001에서 구현한 `repeatGroupId`, `isRepeatInstance` 필드 활용
- 기존 API 엔드포인트 사용 (`GET /api/events`, `PUT /api/events/:id`, `DELETE /api/events/:id`)
- 전체 수정/삭제 시 클라이언트에서 각 인스턴스를 개별적으로 API 호출

### 가정
- 서버 `/api/events/batch` API는 아직 구현되지 않았으므로 클라이언트에서 개별 API 호출로 처리
- 반복 일정은 이미 STORY-001에서 생성되어 있음 (날짜 계산 로직 완료)
- 반복 아이콘은 이모지(🔁) 사용

## 📈 점수 현황 (Score Status)

- **획득 점수 (Acquired Score):** 10점
- **누적 점수 (Cumulative Score):** 36점 (STORY-001: 26점, Analyst: 10점)
- **총점 (Total Score):** 예상 50점 (전체 Story 완료 시)

### 점수 산출 근거
1. 문제 정의가 명확함 - 1점
2. 사용자 스토리가 구체적임 (3개 Epic, 7개 User Story) - 2점
3. 수용 기준이 측정 가능함 (AC 1~7) - 2점
4. 비기능 요구사항이 정의됨 (성능, 사용성, 접근성) - 1점
5. 제약사항이 명시됨 (기존 필드 활용, API 제약) - 1점
6. 성공 지표가 정의됨 - 1점
7. 다음 에이전트가 작업할 수 있는 충분한 정보 제공 - 1점
8. 이전 Story와의 연계성 명확 - 1점

---

**작성 완료 일자**: 2025-10-30  
**작성자**: BMAD Analyst  
**상태**: ✅ 검토 완료

